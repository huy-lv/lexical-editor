"use strict";const N=require("./LexicalCollaborationContext.prod-D-ElPwCy.cjs"),h=require("./index-Do5JgmE8.cjs"),g=require("lexical"),d=require("react");function w(e){const i=new Set,{ownNodeConfig:c}=g.getStaticNodeConfig(e),f=e.transform();if(c){const p=c.$transform;p&&i.add(p)}return f&&i.add(f),i}function L({initialEditor:e,children:i,initialNodes:c,initialTheme:f,skipCollabChecks:p,skipEditableListener:E}){const v=d.useRef(!1),m=d.useContext(h.r);m==null&&function(r,...l){const n=new URL("https://lexical.dev/docs/error"),a=new URLSearchParams;a.append("code",r);for(const t of l)a.append("v",t);throw n.search=a.toString(),Error(`Minified Lexical error #${r}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}(9);const[s,{getTheme:k}]=m,C=d.useMemo(()=>{const r=f||k()||void 0,l=h.t(m,r);r!==void 0&&(e._config.theme=r),e._parentEditor=e._parentEditor||s;const n=e._createEditorArgs,a=n&&n.namespace;if(c){a||(e._config.namespace=s._config.namespace);for(let t of c){let u=null,o=null;if(typeof t!="function"){const _=t;t=_.replace,u=_.with,o=_.withKlass||null}const S=g.getRegisteredNode(e,t.getType());e._nodes.set(t.getType(),{exportDOM:S?S.exportDOM:void 0,klass:t,replace:u,replaceWithKlass:o,sharedNodeState:g.createSharedNodeState(t),transforms:w(t)})}}else if(n&&n.nodes)a||(e._config.namespace=s._config.namespace);else{const t=e._nodes=new Map(s._nodes);a||(e._config.namespace=s._config.namespace);for(const[u,o]of t)e._nodes.set(u,{exportDOM:o.exportDOM,klass:o.klass,replace:o.replace,replaceWithKlass:o.replaceWithKlass,sharedNodeState:g.createSharedNodeState(o.klass),transforms:w(o.klass)})}return[e,l]},[]),{isCollabActive:M,yjsDocMap:b}=N.l(),x=p||v.current||b.has(e.getKey());return d.useEffect(()=>{x&&(v.current=!0)},[x]),d.useEffect(()=>{if(!E){const r=l=>e.setEditable(l);return r(s.isEditable()),s.registerEditableListener(r)}},[e,s,E]),h.jsxRuntimeExports.jsx(h.r.Provider,{value:C,children:!M||x?i:null})}exports.h=L;
